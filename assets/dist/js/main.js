!function(e){"use strict";e(function(){function t(t,n){var s=e(t).find('input[type="search"]').length?e(t).find('input[type="search"]'):e(t).find('input[type="text"]'),o="FORM"===t.tagName||"form"===t.tagName?e(t):e(t).find("form");if(s.length&&!e(t).hasClass("ysm-active")){e(t).addClass("ysm-active");var r={id:"",serviceUrl:i.restUrl,layout:"",productSlug:"product",maxHeight:400,minChars:3,disableAjax:!1,no_results_text:"",loaderIcon:"",preventBadQueries:!0,cache:!0},l=e.extend({},r,n);if(o.on("submit",function(e){var t=s.val();if(""===t||t.length<l.minChars)return!1;var n=i.searchPageUrl;t=t.replace(/\+/g,"%2b"),t=t.replace(/\s/g,"+"),n+=-1!==n.indexOf("?")?"&":"?",n+="s="+t+"&search_id="+l.id,"product"===l.layout&&(n+="&post_type="+l.productSlug),e.preventDefault(),location.href=n}),!l.disableAjax){e('<div class="smart-search-results"></div>').appendTo(o);var a=o.find(".smart-search-results").css({maxHeight:l.maxHeight+"px",width:s.outerWidth()+"px"});-1!==navigator.userAgent.indexOf("Windows")&&-1!==navigator.userAgent.indexOf("Firefox")&&a.addClass("smart-search-firefox"),e(window).on("resize",function(){var e=s.outerWidth()+"px";a.css({width:e}).find(".smart-search-suggestions").css({width:e})}),s.devbridgeAutocomplete({minChars:l.minChars,appendTo:a,serviceUrl:l.serviceUrl,maxHeight:l.maxHeight,dataType:"json",deferRequestBy:100,noCache:!l.cache,containerClass:"smart-search-suggestions",triggerSelectOnValidInput:!1,showNoSuggestionNotice:!!l.no_results_text.length,noSuggestionNotice:l.no_results_text,preventBadQueries:l.preventBadQueries,formatResult:function(e,t){return e.data},onSearchStart:function(t){if(-1!==this.value.indexOf("  ")&&(this.value=this.value.replace(/\s+/g," ")),e.trim(this.value)!==this.value)return!1;t.query=t.query.replace(/%20/g," "),s.css({"background-image":"url("+l.loaderIcon+")","background-repeat":"no-repeat","background-position":"50% 50%"})},onSelect:function(e){-1!=e.id&&e.url&&!e.addToCart&&(window.location.href=e.url)},transformResult:function(t){var i="string"==typeof t?e.parseJSON(t):t;s.val();return i&&i.view_all_link&&""!=i.view_all_link&&(a.find(".smart-search-view-all-holder").length||a.addClass("has-viewall-button").append('<div class="smart-search-view-all-holder"></div>'),a.find(".smart-search-view-all-holder").html(i.view_all_link)),i},onSearchComplete:function(t,i){s.css("background-image","none"),i.length>0?(a.parents(".ysm-active").removeClass("ysm-hide"),setTimeout(function(){var i=a.find(".smart-search-suggestions"),n=parseInt(a.css("max-height"),10),o=i[0],r=e(o).find(".autocomplete-suggestion"),c=0,u=a.find(".smart-search-view-all-holder");if(r.length&&(r.each(function(){c+=this.scrollHeight+parseInt(e(this).css("borderBottomWidth"),10)}),c+=parseInt(e(o).css("borderTopWidth"),10),c+=parseInt(e(o).css("borderBottomWidth"),10)),0==a.outerWidth()&&a.width(s.outerWidth()+"px"),a.nanoScroller({contentClass:"smart-search-suggestions",alwaysVisible:!1,iOSNativeScrolling:!0}),a.height(c>n?n:c),e(o).height("auto"),u.length)if(s.val().length<l.minChars)u.hide();else{var h,d=l.serviceUrl,g=s.devbridgeAutocomplete();e.isFunction(d)&&(d=d.call(g.element,t)),h=d+"?"+e.param({query:t}),g.cachedResponse&&g.cachedResponse[h]&&u.html(g.cachedResponse[h].view_all_link),u.show()}},50)):l.no_results_text.length?(a.css({maxHeight:"auto",height:42}).nanoScroller({contentClass:"smart-search-suggestions",stop:!0}),a.find(".smart-search-suggestions").height(40),a.find(".smart-search-view-all-holder").hide()):(a.find(".smart-search-suggestions").height(0),a.find(".smart-search-view-all-holder").hide())},onSearchError:function(e,t,i,n){a.css({maxHeight:"auto",height:0}).nanoScroller({contentClass:"smart-search-suggestions",stop:!0}),a.find(".smart-search-view-all-holder").hide()},onInvalidateSelection:function(){},onHide:function(){a.css({maxHeight:"auto",height:0}).nanoScroller({contentClass:"smart-search-suggestions",stop:!0}),a.find(".smart-search-view-all-holder").hide()}}).on("focus",function(){s.devbridgeAutocomplete().onValueChange()}),e(window).on("touchstart",function(t){var i=e(t.target).hasClass("ysm-active")?e(t.target):e(t.target).parents(".ysm-active");i.length?i.removeClass("ysm-hide"):e(".ysm-active").addClass("ysm-hide")})}}}var i=window.swsL10n||{};if(i)for(var n in i.widgets)e(i.widgets[n].selector).length&&e(i.widgets[n].selector).each(function(){t(this,{id:n,serviceUrl:i.restUrl+"id="+encodeURIComponent(n),layout:i.widgets[n].layout,productSlug:i.widgets[n].productSlug,maxHeight:i.widgets[n].popupHeight,minChars:i.widgets[n].charCount,disableAjax:i.widgets[n].disableAjax,no_results_text:i.widgets[n].noResultsText,loaderIcon:i.widgets[n].loaderIcon,preventBadQueries:i.widgets[n].preventBadQueries})})})}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(e){"use strict";function t(i,n){var s=function(){},o=this,r={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:t.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:s,onSearchComplete:s,onSearchError:s,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,i){return-1!==e.value.toLowerCase().indexOf(i)},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};o.element=i,o.el=e(i),o.suggestions=[],o.badQueries=[],o.selectedIndex=-1,o.currentValue=o.element.value,o.intervalId=0,o.cachedResponse={},o.onChangeInterval=null,o.onChange=null,o.isLocal=!1,o.suggestionsContainer=null,o.noSuggestionsContainer=null,o.options=e.extend({},r,n),o.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},o.hint=null,o.hintValue="",o.selection=null,o.initialize(),o.setOptions(n)}var i=function(){return{escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}}}(),n={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};t.utils=i,e.Autocomplete=t,t.formatResult=function(e,t){var n="("+i.escapeRegExChars(t)+")";return e.value.replace(new RegExp(n,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},t.prototype={killerFn:null,initialize:function(){var i,n=this,s="."+n.classes.suggestion,o=n.classes.selected,r=n.options;n.element.setAttribute("autocomplete","off"),n.killerFn=function(t){0===e(t.target).closest(r.appendTo).length&&(n.killSuggestions(),n.disableKillerFn())},n.noSuggestionsContainer=e('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),n.suggestionsContainer=t.utils.createNode(r.containerClass),i=e(n.suggestionsContainer),i.appendTo(r.appendTo),"auto"!==r.width&&i.width(r.width),i.on("mouseover.autocomplete",s,function(){n.activate(e(this).data("index"))}),i.on("mouseout.autocomplete",function(){n.selectedIndex=-1,i.children("."+o).removeClass(o)}),i.on("click.autocomplete",s,function(t){n.select(e(this).data("index"),t)}),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},e(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",function(e){n.onKeyPress(e)}),n.el.on("keyup.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("blur.autocomplete",function(){n.onBlur()}),n.el.on("focus.autocomplete",function(){n.onFocus()}),n.el.on("change.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("input.autocomplete",function(e){n.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),0===e.options.minChars&&0===e.el.val().length&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(t){var i=this,n=i.options;e.extend(n,t),i.isLocal=e.isArray(n.lookup),i.isLocal&&(n.lookup=i.verifySuggestionsFormat(n.lookup)),n.orientation=i.validateOrientation(n.orientation,"bottom"),e(i.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,i=e(t.suggestionsContainer),n=i.parent().get(0);if(n===document.body||t.options.forceFixPosition){var s=t.options.orientation,o=i.outerHeight(),r=t.el.outerHeight(),l=t.el.offset(),a={top:l.top,left:l.left};if("auto"===s){var c=e(window).height(),u=e(window).scrollTop(),h=-u+l.top-o,d=u+c-(l.top+r+o);s=Math.max(h,d)===h?"top":"bottom"}if(a.top+="top"===s?-o:r,n!==document.body){var g,p=i.css("opacity");t.visible||i.css("opacity",0).show(),g=i.offsetParent().offset(),a.top-=g.top,a.left-=g.left,t.visible||i.css("opacity",p).hide()}"auto"===t.options.width&&(a.width=t.el.outerWidth()-2+"px"),i.css(a)}},enableKillerFn:function(){var t=this;e(document).on("click.autocomplete",t.killerFn)},disableKillerFn:function(){var t=this;e(document).off("click.autocomplete",t.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.visible&&(e.el.val(e.currentValue),e.hide()),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this,i=t.el.val().length,n=t.element.selectionStart;return"number"==typeof n?n===i:!document.selection||(e=document.selection.createRange(),e.moveStart("character",-i),i===e.text.length)},onKeyPress:function(e){var t=this;if(!t.disabled&&!t.visible&&e.which===n.DOWN&&t.currentValue)return void t.suggest();if(!t.disabled&&t.visible){switch(e.which){case n.ESC:t.el.val(t.currentValue),t.hide();break;case n.RIGHT:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case n.TAB:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case n.RETURN:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case n.UP:t.moveUp();break;case n.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case n.UP:case n.DOWN:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t=this,i=t.options,n=t.el.val(),s=t.getQuery(n);if(t.selection&&t.currentValue!==s&&(t.selection=null,(i.onInvalidateSelection||e.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=n,t.selectedIndex=-1,i.triggerSelectOnValidInput&&t.isExactMatch(s))return void t.select(0);s.length<i.minChars?t.hide():t.getSuggestions(s)},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(t){var i,n=this.options.delimiter;return n?(i=t.split(n),e.trim(i[i.length-1])):t},getSuggestionsLocal:function(t){var i,n=this,s=n.options,o=t.toLowerCase(),r=s.lookupFilter,l=parseInt(s.lookupLimit,10);return i={suggestions:e.grep(s.lookup,function(e){return r(e,t,o)})},l&&i.suggestions.length>l&&(i.suggestions=i.suggestions.slice(0,l)),i},getSuggestions:function(t){var i,n,s,o,r=this,l=r.options,a=l.serviceUrl;if(l.params[l.paramName]=t,n=l.ignoreParams?null:l.params,!1!==l.onSearchStart.call(r.element,l.params)){if(e.isFunction(l.lookup))return void l.lookup(t,function(e){r.suggestions=e.suggestions,r.suggest(),l.onSearchComplete.call(r.element,t,e.suggestions)});r.isLocal?i=r.getSuggestionsLocal(t):(e.isFunction(a)&&(a=a.call(r.element,t)),s=a+"?"+e.param(n||{}),i=r.cachedResponse[s]),i&&e.isArray(i.suggestions)?(r.suggestions=i.suggestions,r.suggest(),l.onSearchComplete.call(r.element,t,i.suggestions)):r.isBadQuery(t)?l.onSearchComplete.call(r.element,t,[]):(r.abortAjax(),o={url:a,data:n,type:l.type,dataType:l.dataType},e.extend(o,l.ajaxSettings),r.currentRequest=e.ajax(o).done(function(e){var i;r.currentRequest=null,i=l.transformResult(e,t),r.processResponse(i,t,s),l.onSearchComplete.call(r.element,t,i.suggestions)}).fail(function(e,i,n){l.onSearchError.call(r.element,t,e,i,n)}))}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(0===e.indexOf(t[i]))return!0;return!1},hide:function(){var t=this,i=e(t.suggestionsContainer);e.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,i),t.visible=!1,t.selectedIndex=-1,clearInterval(t.onChangeInterval),e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestions():this.hide());var t,i=this,n=i.options,s=n.groupBy,o=n.formatResult,r=i.getQuery(i.currentValue),l=i.classes.suggestion,a=i.classes.selected,c=e(i.suggestionsContainer),u=e(i.noSuggestionsContainer),h=n.beforeRender,d="",g=function(e,i){var n=e.data[s];return t===n?"":'<div class="autocomplete-group"><strong>'+(t=n)+"</strong></div>"};if(n.triggerSelectOnValidInput&&i.isExactMatch(r))return void i.select(0);e.each(i.suggestions,function(e,t){s&&(d+=g(t,0)),d+='<div class="'+l+'" data-index="'+e+'">'+o(t,r)+"</div>"}),this.adjustContainerWidth(),u.detach(),c.html(d),e.isFunction(h)&&h.call(i.element,c),i.fixPosition(),c.show(),n.autoSelectFirst&&(i.selectedIndex=0,c.scrollTop(0),c.children("."+l).first().addClass(a)),i.visible=!0,i.findBestHint()},noSuggestions:function(){var t=this,i=e(t.suggestionsContainer),n=e(t.noSuggestionsContainer);this.adjustContainerWidth(),n.detach(),i.empty(),i.append(n),t.fixPosition(),i.show(),t.visible=!0},adjustContainerWidth:function(){var t,i=this,n=i.options,s=e(i.suggestionsContainer);"auto"===n.width&&(t=i.el.outerWidth()-2,s.width(t>0?t:300))},findBestHint:function(){var t=this,i=t.el.val().toLowerCase(),n=null;i&&(e.each(t.suggestions,function(e,t){var s=0===t.value.toLowerCase().indexOf(i);return s&&(n=t),!s}),t.signalHint(n))},signalHint:function(t){var i="",n=this;t&&(i=n.currentValue+t.value.substr(n.currentValue.length)),n.hintValue!==i&&(n.hintValue=i,n.hint=t,(this.options.onHint||e.noop)(i))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},validateOrientation:function(t,i){return t=e.trim(t||"").toLowerCase(),-1===e.inArray(t,["auto","bottom","top"])&&(t=i),t},processResponse:function(e,t,i){var n=this,s=n.options;e.suggestions=n.verifySuggestionsFormat(e.suggestions),s.noCache||(n.cachedResponse[i]=e,s.preventBadQueries&&0===e.suggestions.length&&n.badQueries.push(t)),t===n.getQuery(n.currentValue)&&(n.suggestions=e.suggestions,n.suggest())},activate:function(t){var i,n=this,s=n.classes.selected,o=e(n.suggestionsContainer),r=o.find("."+n.classes.suggestion);return o.find("."+s).removeClass(s),n.selectedIndex=t,-1!==n.selectedIndex&&r.length>n.selectedIndex?(i=r.get(n.selectedIndex),e(i).addClass(s),i):null},selectHint:function(){var t=this,i=e.inArray(t.hint,t.suggestions);t.select(i)},select:function(t,i){var n=this;e(i.target).hasClass("smart-search-add_to_cart")||(n.hide(),n.onSelect(t))},moveUp:function(){var t=this;if(-1!==t.selectedIndex)return 0===t.selectedIndex?(e(t.suggestionsContainer).children().first().removeClass(t.classes.selected),t.selectedIndex=-1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var i=this,n=i.activate(t);if(n){var s,o,r,l=e(n).outerHeight();s=n.offsetTop,o=e(i.suggestionsContainer).scrollTop(),r=o+i.options.maxHeight-l,s<o?e(i.suggestionsContainer).scrollTop(s):s>r&&e(i.suggestionsContainer).scrollTop(s-i.options.maxHeight+l),i.options.preserveInput||i.el.val(i.getValue(i.suggestions[t].value)),i.signalHint(null)}},onSelect:function(t){var i=this,n=i.options.onSelect,s=i.suggestions[t];i.currentValue=i.getValue(s.value),i.currentValue===i.el.val()||i.options.preserveInput||i.el.val(i.currentValue),i.signalHint(null),i.suggestions=[],i.selection=s,e.isFunction(n)&&n.call(i.element,s)},getValue:function(e){var t,i,n=this,s=n.options.delimiter;return s?(t=n.currentValue,i=t.split(s),1===i.length?e:t.substr(0,t.length-i[i.length-1].length)+e):e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.autocomplete=e.fn.devbridgeAutocomplete=function(i,n){return 0===arguments.length?this.first().data("autocomplete"):this.each(function(){var s=e(this),o=s.data("autocomplete");"string"==typeof i?o&&"function"==typeof o[i]&&o[i](n):(o&&o.dispose&&o.dispose(),o=new t(this,i),s.data("autocomplete",o))})}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i){"use strict";var n,s,o,r,l,a,c,u,h,d,g,p,f,v,m,S,x,y,C,w,b,T,H,I,R,O,A,$;w={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},m="scroll",c="mousedown",u="mouseenter",h="mousemove",g="mousewheel",d="mouseup",v="resize",l="drag",a="enter",x="up",f="panedown",o="DOMMouseScroll",r="down",y="wheel",S="touchmove",n="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,s=null,I=t.requestAnimationFrame,C=t.cancelAnimationFrame,O=i.createElement("div").style,$=function(){var e,t,i,n;for(t=["t","webkitT","MozT","msT","OT"],e=i=0,n=t.length;i<n;e=++i)if(t[e],t[e]+"ransform"in O)return t[e].substr(0,t[e].length-1);return!1}(),A=function(e){return!1!==$&&(""===$?e:$+e.charAt(0).toUpperCase()+e.substr(1))},R=A("transform"),T=!1!==R,b=function(){var e,t,n;return e=i.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=m,t.top="-9999px",i.body.appendChild(e),n=e.offsetWidth-e.clientWidth,i.body.removeChild(e),n},H=function(){var e,i,n;return i=t.navigator.userAgent,!!(e=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))&&(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),e&&+n>23)},p=function(){function p(n,o){this.el=n,this.options=o,s||(s=b()),this.$el=e(this.el),this.doc=e(this.options.documentContext||i),this.win=e(this.options.windowContext||t),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return p.prototype.preventScrolling=function(e,t){if(this.isActive)if(e.type===o)(t===r&&e.originalEvent.detail>0||t===x&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===g){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===r&&e.originalEvent.wheelDelta<0||t===x&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},p.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},p.prototype.updateScrollValues=function(){var e,t;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=e.scrollTop,t=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==t&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:t}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},p.prototype.setOnScrollStyles=function(){var e;T?(e={},e[R]="translate(0, "+this.sliderTop+"px)"):e={top:this.sliderTop},I?(C&&this.scrollRAF&&C(this.scrollRAF),this.scrollRAF=I(function(t){return function(){return t.scrollRAF=null,t.slider.css(e)}}(this))):this.slider.css(e)},p.prototype.createEvents=function(){this.events={down:function(e){return function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.slider.is(t.target)||(e.offsetY=0),e.pane.addClass(e.options.activeClass),e.doc.bind(h,e.events[l]).bind(d,e.events[x]),e.body.bind(u,e.events[a]),!1}}(this),drag:function(e){return function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.paneTop-(e.offsetY||.5*e.sliderHeight),e.scroll(),e.contentScrollTop>=e.maxScrollTop&&e.prevScrollTop!==e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&0!==e.prevScrollTop&&e.$el.trigger("scrolltop"),!1}}(this),up:function(e){return function(t){return e.isBeingDragged=!1,e.pane.removeClass(e.options.activeClass),e.doc.unbind(h,e.events[l]).unbind(d,e.events[x]),e.body.unbind(u,e.events[a]),!1}}(this),resize:function(e){return function(t){e.reset()}}(this),panedown:function(e){return function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1}}(this),scroll:function(e){return function(t){e.updateScrollValues(),e.isBeingDragged||(e.iOSNativeScrolling||(e.sliderY=e.sliderTop,e.setOnScrollStyles()),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,r),e.prevScrollTop!==e.maxScrollTop&&e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,x),0!==e.prevScrollTop&&e.$el.trigger("scrolltop"))))}}(this),wheel:function(e){return function(t){var i;if(null!=t)return i=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail,i&&(e.sliderY+=-i/3),e.scroll(),!1}}(this),enter:function(e){return function(t){var i;if(e.isBeingDragged)return 1!==(t.buttons||t.which)?(i=e.events)[x].apply(i,arguments):void 0}}(this)}},p.prototype.addEvents=function(){var e;this.removeEvents(),e=this.events,this.options.disableResize||this.win.bind(v,e[v]),this.iOSNativeScrolling||(this.slider.bind(c,e[r]),this.pane.bind(c,e[f]).bind(g+" "+o,e[y])),this.$content.bind(m+" "+g+" "+o+" "+S,e[m])},p.prototype.removeEvents=function(){var e;e=this.events,this.win.unbind(v,e[v]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(m+" "+g+" "+o+" "+S,e[m])},p.prototype.generate=function(){var e,i,n,o,r,l;return n=this.options,r=n.paneClass,l=n.sliderClass,n.contentClass,(o=this.$el.children("."+r)).length||o.children("."+l).length||this.$el.append('<div class="'+r+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+r),this.slider=this.pane.find("."+l),0===s&&H()?(i=t.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),e={right:-14,paddingRight:+i+14}):s&&(e={right:-s},this.$el.addClass(n.enabledClass)),null!=e&&this.$content.css(e),this},p.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},p.prototype.reset=function(){var e,t,i,o,r,l,a,c,u,h,d,g;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),e=this.content,o=e.style,r=o.overflowY,n&&this.$content.css({height:this.$content.height()}),t=e.scrollHeight+s,h=parseInt(this.$el.css("max-height"),10),h>0&&(this.$el.height(""),this.$el.height(e.scrollHeight>h?h:e.scrollHeight)),a=this.pane.outerHeight(!1),u=parseInt(this.pane.css("top"),10),l=parseInt(this.pane.css("bottom"),10),c=a+u+l,g=Math.round(c/t*a),g<this.options.sliderMinHeight?g=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&g>this.options.sliderMaxHeight&&(g=this.options.sliderMaxHeight),r===m&&o.overflowX!==m&&(g+=s),this.maxSliderTop=c-g,this.contentHeight=t,this.paneHeight=a,this.paneOuterHeight=c,this.sliderHeight=g,this.paneTop=u,this.slider.height(g),this.events.scroll(),this.pane.show(),this.isActive=!0,e.scrollHeight===e.clientHeight||this.pane.outerHeight(!0)>=e.scrollHeight&&r!==m?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&r===m?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),"static"!==i&&"relative"!==i||(d=parseInt(this.$content.css("right"),10))&&this.$content.css({right:"",marginRight:d}),this)},p.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this},p.prototype.scrollBottom=function(e){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger(g),this.stop().restore(),this},p.prototype.scrollTop=function(e){if(this.isActive)return this.$content.scrollTop(+e).trigger(g),this.stop().restore(),this},p.prototype.scrollTo=function(e){if(this.isActive)return this.scrollTop(this.$el.find(e).get(0).offsetTop),this},p.prototype.stop=function(){return C&&this.scrollRAF&&(C(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},p.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass(this.options.enabledClass)&&(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""})),this},p.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout(function(e){return function(){e.pane.removeClass(e.options.flashedClass)}}(this),this.options.flashDelay),this},p}(),e.fn.nanoScroller=function(t){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=e.extend({},w,t),this.nanoscroller=n=new p(this,i)),t&&"object"==typeof t){if(e.extend(n.options,t),null!=t.scrollBottom)return n.scrollBottom(t.scrollBottom);if(null!=t.scrollTop)return n.scrollTop(t.scrollTop);if(t.scrollTo)return n.scrollTo(t.scrollTo);if("bottom"===t.scroll)return n.scrollBottom(0);if("top"===t.scroll)return n.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return n.scrollTo(t.scroll);if(t.stop)return n.stop();if(t.destroy)return n.destroy();if(t.flash)return n.flash()}return n.reset()})},e.fn.nanoScroller.Constructor=p});